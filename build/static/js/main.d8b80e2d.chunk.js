(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(11),c=n.n(r),o=(n(108),n(13)),s=n.n(o),i=n(18),l=n(14),u=n(185),j=n(170),d=n(167),b=n(182),h=n(172),p=n(171),O=n(59),m=n.n(O),x=n(87),f=n(162),g=n(165),v=n(2),y=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function S(e){var t=e.history,n=y(),r=Object(a.useState)(""),c=Object(l.a)(r,2),o=c[0],O=c[1],f=Object(a.useState)(""),S=Object(l.a)(f,2),w=S[0],k=S[1];return Object(v.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(d.a,{}),Object(v.jsxs)("div",{className:n.paper,children:[Object(v.jsx)(u.a,{className:n.avatar,children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(x.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(v.jsxs)("form",{className:n.form,noValidate:!0,children:[Object(v.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"username",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(e){O(e.target.value)}}),Object(v.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){k(e.target.value)}}),Object(v.jsx)(j.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,onClick:Object(i.a)(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/auth/login",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({u_name:o,password:w})});case 3:return n=e.sent,console.log(n),e.next=7,n.json();case 7:a=e.sent,400===n.status&&alert(a.err),a.token&&(localStorage.token=a.token,t.push("/home")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),children:"Sign In"}),Object(v.jsx)(p.a,{container:!0,children:Object(v.jsx)(p.a,{item:!0,children:Object(v.jsx)(h.a,{variant:"body2",onClick:function(){t.push("/register")},children:"Don't have an account? Sign Up"})})})]})]})]})}var w=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function k(e){var t=e.history,n=w(),r=Object(a.useState)(""),c=Object(l.a)(r,2),o=c[0],O=c[1],f=Object(a.useState)(""),y=Object(l.a)(f,2),S=y[0],k=y[1],C=Object(a.useState)(""),N=Object(l.a)(C,2),_=N[0],D=N[1],A=Object(a.useState)(""),T=Object(l.a)(A,2),E=T[0],W=T[1];return Object(v.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(d.a,{}),Object(v.jsxs)("div",{className:n.paper,children:[Object(v.jsx)(u.a,{className:n.avatar,children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(x.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(v.jsxs)("form",{className:n.form,noValidate:!0,children:[Object(v.jsxs)(p.a,{container:!0,spacing:2,children:[Object(v.jsx)(p.a,{item:!0,xs:12,sm:6,children:Object(v.jsx)(b.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:function(e){D(e.target.value)}})}),Object(v.jsx)(p.a,{item:!0,xs:12,sm:6,children:Object(v.jsx)(b.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lastname",onChange:function(e){W(e.target.value)}})}),Object(v.jsx)(p.a,{item:!0,xs:12,children:Object(v.jsx)(b.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"username",name:"username",autoComplete:"username",onChange:function(e){O(e.target.value)}})}),Object(v.jsx)(p.a,{item:!0,xs:12,children:Object(v.jsx)(b.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){k(e.target.value)}})})]}),Object(v.jsx)(j.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,onClick:Object(i.a)(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/auth/register",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({u_name:o,password:S,f_name:_,l_name:E})});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,400===n.status&&alert(a.err),n&&t.push("/login"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),children:"Sign Up"}),Object(v.jsx)(p.a,{container:!0,justify:"flex-end",children:Object(v.jsx)(p.a,{item:!0,children:Object(v.jsx)(h.a,{variant:"body2",onClick:function(){t.push("/login")},children:"Already have an account? Sign in"})})})]})]})]})}var C=n(15),N=n(173),_=n(174),D=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function A(e){var t=e.userName,n=D(),a=Object(C.g)();return Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:n.root,children:Object(v.jsx)(N.a,{position:"static",children:Object(v.jsxs)(_.a,{children:[Object(v.jsxs)(x.a,{variant:"h6",className:n.title,children:["Hello ",t]}),Object(v.jsx)(j.a,{color:"inherit",type:"button",onClick:function(){localStorage.removeItem("token"),a.push("/login")},children:"LOG OUT"})]})})})})}var T=n(76),E=n(77),W=n.n(E);function F(e){var t=e.vacArr,n=Object(C.g)(),r=[],c=Object(a.useState)([]),o=Object(l.a)(c,2),u=o[0],d=o[1];Object(a.useEffect)((function(){localStorage.token||n.push("/login"),Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.filter((function(e){return e.followers>0})).forEach((function(e){r.push({x:e.destenation,y:e.followers})})),console.log(r),d(r);case 4:case"end":return e.stop()}}),e)})))()}),[]);var b=[{label:"Series 1",data:u}];return Object(v.jsxs)("div",{children:[Object(v.jsxs)(j.a,{style:{marginLeft:"90%",marginTop:"20px"},color:"inherit",type:"button",onClick:function(){return n.push("/home")},children:[Object(v.jsx)(W.a,{}),"BACK"]}),Object(v.jsx)("h1",{style:{marginLeft:"40%"},children:"Followed vacations"}),Object(v.jsx)("div",{style:{width:"1000px",height:"600px",margin:"60px auto",borderRadius:"5px"},children:Object(v.jsx)(T.Chart,{data:b,axes:[{primary:!0,type:"ordinal",position:"bottom"},{position:"left",type:"linear",base:0,tickPadding:5}],series:{type:"bar",xName:"xx",yName:"yy"}})})]})}var I=n(175),L=n(177),J=n(176),R=n(81),z=n.n(R),U=n(82),P=n.n(U),V=n(79),B=n.n(V),q=n(80),G=n.n(q),H=n(28),K=n(186),M=Object(f.a)({root:{maxWidth:1500,margin:"auto",marginTop:80},media:{height:350}});function Y(e){var t=e.vac,n=e.remove,a=e.handleClickOpen,r=e.follow,c=Object(H.c)((function(e){return e.userId})),o=Object(H.c)((function(e){return e.userRole})),s=M();return Object(v.jsx)("div",{children:Object(v.jsxs)(I.a,{className:s.root,children:[Object(v.jsx)(J.a,{className:s.media,image:t.image,title:t.destenation}),Object(v.jsxs)(L.a,{children:[Object(v.jsxs)(x.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[t.destenation," $",t.price,o?Object(v.jsxs)("span",{children:[Object(v.jsx)(K.a,{title:"DELETE VACATION",children:Object(v.jsxs)(j.a,{type:"button",size:"small",color:"primary",children:[" ",Object(v.jsx)(B.a,{onClick:function(){return n(t.v_id)}})]})}),Object(v.jsx)(K.a,{title:"EDIT VACATION",children:Object(v.jsx)(j.a,{type:"button",size:"small",color:"primary",children:Object(v.jsx)(G.a,{onClick:function(){return a(t.v_id)}})})})]}):Object(v.jsx)("span",{children:Object(v.jsx)(j.a,{type:"button",size:"small",color:"primary",onClick:function(){return r(t.v_id,t.u_id,t.f_id,c)},children:t.u_id?Object(v.jsx)(K.a,{title:"UNFOLLOW",children:Object(v.jsx)(z.a,{})}):Object(v.jsx)(K.a,{title:"FOLLOW",children:Object(v.jsx)(P.a,{})})})}),Object(v.jsx)(K.a,{title:"FOLLOWERS",children:Object(v.jsx)("span",{className:"fol",children:t.followers})})]}),Object(v.jsx)(x.a,{variant:"body2",color:"textSecondary",component:"p",children:t.description}),Object(v.jsxs)(x.a,{variant:"h6",component:"p",children:[t.s_date.replaceAll("-","/").substr(0,10)," - ",t.e_date.replaceAll("-","/").substr(0,10)]})]})]})})}var $=n(83),Q=n.n($),X=n(178),Z=n(84),ee=n.n(Z);function te(e){var t=e.vacArr,n=e.remove,a=e.handleClickOpen,r=e.follow,c=Object(H.c)((function(e){return e.userRole})),o=Object(C.g)();return Object(v.jsxs)("div",{children:[c?Object(v.jsxs)("span",{className:"admin",children:[Object(v.jsx)("h1",{className:"title",children:" So where should we take them next?"}),Object(v.jsxs)("span",{children:[Object(v.jsx)(K.a,{title:"ADD VACATION",children:Object(v.jsxs)(X.a,{type:"button",size:"large",color:"disabled",style:{marginright:"3%"},onClick:function(){return a(0)},children:[" ",Object(v.jsx)(Q.a,{})," "]})}),Object(v.jsx)(K.a,{title:"SHOW REPORTS",children:Object(v.jsxs)(X.a,{type:"button",color:"disabled",size:"large","aria-label":"reports",label:"reports",onClick:function(){return o.push("/home/reports")},children:[" ",Object(v.jsx)(ee.a,{}),"  "]})})]})]}):Object(v.jsx)("h1",{className:"title",children:" So where do we go next..."}),t.map((function(e){return Object(v.jsx)(Y,{vac:e,remove:n,follow:r,handleClickOpen:a},e.v_id)}))]})}var ne=n(184),ae=n(181),re=n(180),ce=n(179),oe=n(32);function se(){var e=Object(C.g)(),t=JSON.parse(atob(localStorage.token.split(".")[1])).id,n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)([]),d=Object(l.a)(u,2),h=d[0],p=d[1],O=Object(a.useState)(!0),m=Object(l.a)(O,2),x=m[0],f=m[1],g=Object(a.useState)(""),y=Object(l.a)(g,2),S=y[0],w=y[1],k=Object(a.useState)(""),N=Object(l.a)(k,2),_=N[0],D=N[1],A=Object(a.useState)(new Date),T=Object(l.a)(A,2),E=T[0],W=T[1],I=Object(a.useState)(new Date),L=Object(l.a)(I,2),J=L[0],R=L[1],z=Object(a.useState)(""),U=Object(l.a)(z,2),P=U[0],V=U[1],B=Object(a.useState)(""),q=Object(l.a)(B,2),G=q[0],H=q[1],K=Object(a.useState)(0),M=Object(l.a)(K,2),Y=M[0],$=M[1];function Q(e){return e.getFullYear()+"-"+(1+e.getMonth()).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}var X=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Q(new Date),t?(a=h.find((function(e){return e.v_id===t})),r=new Date(a.s_date),c=new Date(a.e_date),$(t),w(a.destenation),D(a.description),W(Q(r)),R(Q(c)),H(a.price),V(a.image)):($(0),w(""),D(""),H(""),V(""),W(n),R(n)),o(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){o(!1)};Object(a.useEffect)((function(){localStorage.token||e.push("/login"),Object(i.a)(s.a.mark((function e(){var n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/user",{method:"get",headers:{authorization:localStorage.token}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r=a.filter((function(e){return e.u_id===t})).sort((function(e,t){return new Date(e.s_date)-new Date(t.s_date)})),c=a.filter((function(e){return e.u_id!==t})).sort((function(e,t){return new Date(e.s_date)-new Date(t.s_date)})),p(r.concat(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}),[x]);var ee=function(){var e=Object(i.a)(s.a.mark((function e(t,n,a,r){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=7;break}return e.next=4,fetch("http://localhost:1000/user",{method:"delete",body:JSON.stringify({v_id:t,f_id:a}),headers:{"content-type":"application/json",authorization:localStorage.token}});case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,fetch("http://localhost:1000/user",{method:"put",body:JSON.stringify({v_id:t,u_id:r}),headers:{"content-type":"application/json",authorization:localStorage.token}});case 9:c=e.sent;case 10:f(!x),console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("BLAH",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),se=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/admin",{method:"delete",body:JSON.stringify({v_id:t}),headers:{"content-type":"application/json",authorization:localStorage.token}});case 3:n=e.sent,f(!x),console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(i.a)(s.a.mark((function e(t,n,a,r,c,o,i){var l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("edit"),console.log(c),e.next=5,fetch("http://localhost:1000/admin",{method:"put",body:JSON.stringify({v_id:t,destenation:n,description:a,price:r,s_date:c,e_date:o,image:i}),headers:{"content-type":"application/json",authorization:localStorage.token}});case 5:return l=e.sent,f(!x),console.log(l),e.next=10,l.json();case 10:u=e.sent,400===l.status&&alert(u.err),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,a,r,c,o,s){return e.apply(this,arguments)}}(),le=function(){var e=Object(i.a)(s.a.mark((function e(t,n,a,r,c,o){var i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("add"),e.next=4,fetch("http://localhost:1000/admin",{method:"post",body:JSON.stringify({destenation:t,description:n,price:a,s_date:r,e_date:c,image:o}),headers:{"content-type":"application/json",authorization:localStorage.token}});case 4:return i=e.sent,f(!x),console.log(i),e.next=9,i.json();case 9:l=e.sent,400===i.status&&alert(l.err),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,a,r,c,o){return e.apply(this,arguments)}}();return Object(v.jsx)(oe.a,{children:Object(v.jsxs)("div",{children:[Object(v.jsxs)(C.d,{children:[Object(v.jsx)(C.b,{path:"/home/reports",component:function(){return Object(v.jsx)(F,{vacArr:h})}}),Object(v.jsx)(C.b,{path:"/home/list",component:function(){return Object(v.jsx)(te,{vacArr:h,remove:se,follow:ee,handleClickOpen:X})}}),Object(v.jsx)(C.a,{from:"/home",to:"/home/list",exact:!0})]}),Object(v.jsxs)(ne.a,{open:c,onClose:Z,"aria-labelledby":"form-dialog-title",children:[Object(v.jsx)(ce.a,{id:"form-dialog-title",children:Y?Object(v.jsx)("span",{children:"EDIT VACATION"}):Object(v.jsx)("span",{children:"ADD VACATION"})}),Object(v.jsxs)(re.a,{children:[Object(v.jsx)(b.a,{autoFocus:!0,margin:"dense",id:"Destenation",type:"text",fullWidth:!0,label:"Destenation",value:S,onChange:function(e){w(e.target.value)}}),Object(v.jsx)(b.a,{autoFocus:!0,margin:"dense",id:"Description",type:"text",fullWidth:!0,label:"Description",value:_,onChange:function(e){D(e.target.value)}}),Object(v.jsx)(b.a,{autoFocus:!0,margin:"dense",id:"Price",type:"number",fullWidth:!0,label:"Price - USD",value:G,onChange:function(e){H(e.target.value)}}),Object(v.jsx)(b.a,{autoFocus:!0,margin:"dense",id:"s_date",type:"date",fullWidth:!0,label:"Start date",value:E,onChange:function(e){W(e.target.value)}}),Object(v.jsx)(b.a,{autoFocus:!0,margin:"dense",id:"e_date",type:"date",fullWidth:!0,label:"End date",value:J,onChange:function(e){R(e.target.value)}}),Object(v.jsx)(b.a,{autoFocus:!0,margin:"dense",id:"image",type:"text",fullWidth:!0,label:"image",value:P,onChange:function(e){V(e.target.value)}}),Object(v.jsx)("img",{src:P,alt:S,height:"300"})]}),Object(v.jsxs)(ae.a,{children:[Object(v.jsx)(j.a,{type:"button",color:"primary",onClick:Z,children:"Cancel"}),Object(v.jsx)(j.a,{type:"button",color:"primary",onClick:Z,children:Y?Object(v.jsx)("span",{onClick:function(){E>J?(R(E),alert("set new end date")):ie(Y,S,_,G,E,J,P)},children:"SAVE"}):Object(v.jsx)("span",{onClick:function(){E>J?(R(E),alert("set new end date")):le(S,_,G,E,J,P)},children:"ADD TO DATABASE"})})]})]})]})})}function ie(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(H.b)();return Object(a.useEffect)((function(){Object(i.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=JSON.parse(atob(localStorage.token.split(".")[1])).id,n=JSON.parse(atob(localStorage.token.split(".")[1])).role,a=JSON.parse(atob(localStorage.token.split(".")[1])).username,r(a),c({type:"SET_USER",id:t,role:n,user:a})}catch(o){console.log(o)}case 1:case"end":return e.stop()}}),e)})))()}),[]),Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("div",{className:"header",children:Object(v.jsx)(A,{userName:n})}),Object(v.jsx)("div",{className:"list",children:Object(v.jsx)(se,{})})]})}function le(){return Object(v.jsx)(oe.a,{children:Object(v.jsx)("div",{children:Object(v.jsxs)(C.d,{children:[Object(v.jsx)(C.b,{path:"/login",component:S}),Object(v.jsx)(C.b,{path:"/register",component:k}),Object(v.jsx)(C.b,{path:"/home",component:ie}),Object(v.jsx)(C.a,{from:"/",to:"/login",exact:!0})]})})})}var ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,187)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},je=n(85),de=n(61),be=Object(de.createStore)(Object(de.combineReducers)({userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return e=t.id;default:return e}},userRole:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return e=t.role;default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return e=t.user;default:return e}}}),Object(je.devToolsEnhancer)());c.a.render(Object(v.jsx)(H.a,{store:be,children:Object(v.jsx)(le,{})}),document.getElementById("root")),ue()}},[[124,1,2]]]);
//# sourceMappingURL=main.d8b80e2d.chunk.js.map